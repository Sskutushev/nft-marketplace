'use client';

import { useState, useEffect } from 'react';
import Image from 'next/image';
import styles from './Header.module.scss';
import BurgerMenu from './BurgerMenu';

const Header = () => {
  const [isScrolled, setIsScrolled] = useState(false);
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 50);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const toggleMobileMenu = () => {
    setIsMobileMenuOpen(!isMobileMenuOpen);
  };

  return (
    <>
      <header className={`${styles.header} ${isScrolled ? styles.scrolled : ''}`}>
        <div className={styles.container}>
          {/* Desktop Header - Logo, Navigation, Button */}
          <div className={styles.desktopHeader}>
            {/* Logo */}
            <div className={styles.logo}>
              <svg className={styles.logoIcon} width="53" height="53" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M46.9269 36.1279C44.9836 36.1279 44.1223 35.3771 42.9077 34.3171C41.5607 33.1687 39.8823 31.7112 36.7244 31.7112C33.5444 31.7112 31.8881 33.1687 30.5411 34.3171C29.3265 35.3771 28.4432 36.1279 26.4998 36.1279C24.5786 36.1279 23.6952 35.3771 22.4807 34.3171C21.1336 33.1687 19.4553 31.7112 16.2973 31.7112C13.1173 31.7112 11.439 33.1687 10.0919 34.3171C8.87735 35.3771 8.01609 36.1279 6.07275 36.1279C5.16734 36.1279 4.4165 36.8787 4.4165 37.7842C4.4165 38.7117 5.16734 39.4404 6.07275 39.4404C9.25275 39.4404 10.909 38.005 12.2561 36.8346C13.4706 35.7746 14.3540 35.0237 16.2973 35.0237C18.2407 35.0237 19.1019 35.7746 20.3165 36.8346C21.6636 38.0050 23.3419 39.4404 26.4998 39.4404C29.6798 39.4404 31.3582 38.0050 32.7052 36.8346C33.9198 35.7746 34.7811 35.0237 36.7244 35.0237C38.6457 35.0237 39.5290 35.7746 40.7436 36.8346C42.0907 38.0050 43.7690 39.4404 46.9269 39.4404C47.8323 39.4404 48.5832 38.7117 48.5832 37.7842C48.5832 36.8787 47.8323 36.1279 46.9269 36.1279Z" fill="#141416"/>
                <path d="M46.9269 27.0306C44.9836 27.0306 44.1223 26.2577 42.9077 25.2198C41.5607 24.0494 39.8823 22.6140 36.7244 22.6140C33.5444 22.6140 31.8881 24.0494 30.5411 25.2198C29.3265 26.2577 28.4432 27.0306 26.4998 27.0306C24.5786 27.0306 23.6952 26.2577 22.4807 25.2198C21.1336 24.0494 19.4553 22.6140 16.2973 22.6140C13.1173 22.6140 11.4390 24.0494 10.0919 25.2198C8.87735 26.2577 8.01609 27.0306 6.07275 27.0306C5.16734 27.0306 4.41650 27.7594 4.41650 28.6869C4.41650 29.5923 5.16734 30.3431 6.07275 30.3431C9.25275 30.3431 10.9090 28.8856 12.2561 27.7152C13.4706 26.6773 14.3540 25.9265 16.2973 25.9265C18.2407 25.9265 19.1019 26.6773 20.3165 27.7152C21.6636 28.8856 23.3419 30.3431 26.4998 30.3431C29.6798 30.3431 31.3582 28.8856 32.7052 27.7152C33.9198 26.6773 34.7811 25.9265 36.7244 25.9265C38.6457 25.9265 39.5290 26.6773 40.7436 27.7152C42.0907 28.8856 43.7690 30.3431 46.9269 30.3431C47.8323 30.3431 48.5832 29.5923 48.5832 28.6869C48.5832 27.7594 47.8323 27.0306 46.9269 27.0306Z" fill="#141416"/>
                <path d="M6.07275 21.2886C9.25275 21.2886 10.9090 19.8311 12.2561 18.6828C13.4706 17.6228 14.3540 16.8719 16.2973 16.8719C18.2407 16.8719 19.1019 17.6228 20.3165 18.6828C21.6636 19.8311 23.3419 21.2886 26.4998 21.2886C29.6798 21.2886 31.3582 19.8311 32.7052 18.6828C33.9198 17.6228 34.7811 16.8719 36.7244 16.8719C38.6457 16.8719 39.5290 17.6228 40.7436 18.6828C42.0907 19.8311 43.7690 21.2886 46.9269 21.2886C47.8323 21.2886 48.5832 20.5378 48.5832 19.6324C48.5832 18.7049 47.8323 17.9761 46.9269 17.9761C44.9836 17.9761 44.1223 17.2253 42.9077 16.1653C41.5606 14.9949 39.8823 13.5594 36.7244 13.5594C33.5444 13.5594 31.8881 14.9949 30.5411 16.1653C29.3265 17.2253 28.4432 17.9761 26.4998 17.9761C24.5786 17.9761 23.6952 17.2253 22.4807 16.1653C21.1336 14.9949 19.4553 13.5594 16.2973 13.5594C13.1173 13.5594 11.4390 14.9949 10.0919 16.1653C8.87735 17.2253 8.01609 17.9761 6.07275 17.9761C5.16734 17.9761 4.41650 18.7049 4.41650 19.6324C4.41650 20.5378 5.16734 21.2886 6.07275 21.2886Z" fill="#141416"/>
              </svg>
              <span className={styles.logoText}></span>
            </div>

            {/* Desktop Navigation */}
            <nav className={styles.nav}>
              <a href="#discover" className={styles.navLink}>DISCOVER</a>
              <a href="#creators" className={styles.navLink}>CREATORS</a>
              <a href="#sell" className={styles.navLink}>SELL</a>
              <a href="#stats" className={styles.navLink}>STATS</a>
            </nav>

            {/* Spacer to push button to exact position */}
            <div className={styles.positionSpacer}></div>

            {/* CTA Button */}
            <button className={styles.ctaButton}>
              CONNECT WALLET
            </button>
          </div>

          {/* Mobile Header - Logo with text and Burger Menu */}
          <div className={styles.mobileHeader}>
            <div className={styles.mobileLogo}>
              <svg className={styles.logoIcon} width="46" height="46" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M46.9269 36.1279C44.9836 36.1279 44.1223 35.3771 42.9077 34.3171C41.5607 33.1687 39.8823 31.7112 36.7244 31.7112C33.5444 31.7112 31.8881 33.1687 30.5411 34.3171C29.3265 35.3771 28.4432 36.1279 26.4998 36.1279C24.5786 36.1279 23.6952 35.3771 22.4807 34.3171C21.1336 33.1687 19.4553 31.7112 16.2973 31.7112C13.1173 31.7112 11.439 33.1687 10.0919 34.3171C8.87735 35.3771 8.01609 36.1279 6.07275 36.1279C5.16734 36.1279 4.4165 36.8787 4.4165 37.7842C4.4165 38.7117 5.16734 39.4404 6.07275 39.4404C9.25275 39.4404 10.909 38.005 12.2561 36.8346C13.4706 35.7746 14.3540 35.0237 16.2973 35.0237C18.2407 35.0237 19.1019 35.7746 20.3165 36.8346C21.6636 38.0050 23.3419 39.4404 26.4998 39.4404C29.6798 39.4404 31.3582 38.0050 32.7052 36.8346C33.9198 35.7746 34.7811 35.0237 36.7244 35.0237C38.6457 35.0237 39.5290 35.7746 40.7436 36.8346C42.0907 38.0050 43.7690 39.4404 46.9269 39.4404C47.8323 39.4404 48.5832 38.7117 48.5832 37.7842C48.5832 36.8787 47.8323 36.1279 46.9269 36.1279Z" fill="#141416"/>
                <path d="M46.9269 27.0306C44.9836 27.0306 44.1223 26.2577 42.9077 25.2198C41.5607 24.0494 39.8823 22.6140 36.7244 22.6140C33.5444 22.6140 31.8881 24.0494 30.5411 25.2198C29.3265 26.2577 28.4432 27.0306 26.4998 27.0306C24.5786 27.0306 23.6952 26.2577 22.4807 25.2198C21.1336 24.0494 19.4553 22.6140 16.2973 22.6140C13.1173 22.6140 11.4390 24.0494 10.0919 25.2198C8.87735 26.2577 8.01609 27.0306 6.07275 27.0306C5.16734 27.0306 4.41650 27.7594 4.41650 28.6869C4.41650 29.5923 5.16734 30.3431 6.07275 30.3431C9.25275 30.3431 10.9090 28.8856 12.2561 27.7152C13.4706 26.6773 14.3540 25.9265 16.2973 25.9265C18.2407 25.9265 19.1019 26.6773 20.3165 27.7152C21.6636 28.8856 23.3419 30.3431 26.4998 30.3431C29.6798 30.3431 31.3582 28.8856 32.7052 27.7152C33.9198 26.6773 34.7811 25.9265 36.7244 25.9265C38.6457 25.9265 39.5290 26.6773 40.7436 27.7152C42.0907 28.8856 43.7690 30.3431 46.9269 30.3431C47.8323 30.3431 48.5832 29.5923 48.5832 28.6869C48.5832 27.7594 47.8323 27.0306 46.9269 27.0306Z" fill="#141416"/>
                <path d="M6.07275 21.2886C9.25275 21.2886 10.9090 19.8311 12.2561 18.6828C13.4706 17.6228 14.3540 16.8719 16.2973 16.8719C18.2407 16.8719 19.1019 17.6228 20.3165 18.6828C21.6636 19.8311 23.3419 21.2886 26.4998 21.2886C29.6798 21.2886 31.3582 19.8311 32.7052 18.6828C33.9198 17.6228 34.7811 16.8719 36.7244 16.8719C38.6457 16.8719 39.5290 17.6228 40.7436 18.6828C42.0907 19.8311 43.7690 21.2886 46.9269 21.2886C47.8323 21.2886 48.5832 20.5378 48.5832 19.6324C48.5832 18.7049 47.8323 17.9761 46.9269 17.9761C44.9836 17.9761 44.1223 17.2253 42.9077 16.1653C41.5606 14.9949 39.8823 13.5594 36.7244 13.5594C33.5444 13.5594 31.8881 14.9949 30.5411 16.1653C29.3265 17.2253 28.4432 17.9761 26.4998 17.9761C24.5786 17.9761 23.6952 17.2253 22.4807 16.1653C21.1336 14.9949 19.4553 13.5594 16.2973 13.5594C13.1173 13.5594 11.4390 14.9949 10.0919 16.1653C8.87735 17.2253 8.01609 17.9761 6.07275 17.9761C5.16734 17.9761 4.41650 18.7049 4.41650 19.6324C4.41650 20.5378 5.16734 21.2886 6.07275 21.2886Z" fill="#141416"/>
              </svg>
              <span className={styles.logoText}>DiveSea</span>
            </div>

            <button
              className={styles.burgerButton}
              onClick={toggleMobileMenu}
              aria-label={isMobileMenuOpen ? 'Close menu' : 'Open menu'}
            >
              {isMobileMenuOpen ? (
                <Image src="/images/menu.svg" alt="Close menu" width={24} height={24} />
              ) : (
                <Image src="/images/Frame 21.svg" alt="Open menu" width={40} height={40} />
              )}
            </button>
          </div>
        </div>
      </header>

      <BurgerMenu
        isOpen={isMobileMenuOpen}
        onClose={toggleMobileMenu}
      />
    </>
  );
};

export default Header;